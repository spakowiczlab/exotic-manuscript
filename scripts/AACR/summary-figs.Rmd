---
title: "Summary figures"
author: "Rebecca Hoyd"
agg_exo.rae: "February 6, 2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(dplyr)
library(tidyr)
library(ggplot2)
```

# Load data

```{r}
exo.ra <- read.table("../../data/agg_exo-ra.txt", header = TRUE)
```


# Microbe stacked bar

```{r}
# are there any NAs in the df
any(is.na(exo.ra))

# Fill any NAs with a 0
exo.ra[is.na(exo.ra)] <- 0


exo.ra.l <- exo.ra %>%
  gather(-sample, -cancer, key = "micro", value = "percent")


exo.ra.l %>%
  ggplot(aes(x = id, y = percent, fill = micro))+
  facet_wrap(vars(cancer)) +
  geom_bar(position="fill", stat = "identity") +
  theme(legend.position = "none", axis.text.x = element_blank()) +
  ggsave("../../figures/AACR/stacked-bar_microbes.pdf", height = 10, width = 10)

```